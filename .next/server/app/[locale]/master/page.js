(()=>{var e={};e.id=181,e.ids=[181],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3977:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c}),a(5191),a(1373),a(5866);var s=a(3191),i=a(8716),r=a(7922),n=a.n(r),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["[locale]",{children:["master",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5191)),"/Users/superalexbase/.openclaw/workspace/tianjige/app/[locale]/master/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1373)),"/Users/superalexbase/.openclaw/workspace/tianjige/app/[locale]/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/superalexbase/.openclaw/workspace/tianjige/app/[locale]/master/page.tsx"],p="/[locale]/master/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/[locale]/master/page",pathname:"/[locale]/master",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5113:(e,t,a)=>{Promise.resolve().then(a.bind(a,7113))},7113:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(326),i=a(7577),r=a(3844),n=a(1572),l=a(6557);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var c=a(9730),d=a(9635);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,l.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var m=a(772),u=a(7863),x=a(58),h=a(8129);function y(){let e=(0,r.useTranslations)(),[t,a]=(0,i.useState)([]),[l,y]=(0,i.useState)(""),[f,g]=(0,i.useState)(!1),v=(0,i.useRef)(null),b=async()=>{if(!l.trim()||f)return;let e={id:Date.now().toString(),role:"user",content:l,timestamp:new Date};a(t=>[...t,e]),y(""),g(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:l,history:t.map(e=>({role:e.role,content:e.content}))})});if(!e.ok)throw Error("Failed to get response");let s=await e.json(),i={id:(Date.now()+1).toString(),role:"assistant",content:s.message,timestamp:new Date};a(e=>[...e,i])}catch(t){console.error("Error:",t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"施主，贫僧正在闭关修炼，稍后为您解惑。",timestamp:new Date};a(t=>[...t,e])}finally{g(!1)}},j={id:"welcome",role:"assistant",content:"施主，贫僧在此恭候多时。\n\n天机阁汇聚五千年智慧，能为您推演命理、答疑解惑。\n\n有何困惑，尽管道来。",timestamp:new Date},w={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:20}}};return(0,s.jsxs)("div",{className:"flex h-[calc(100vh-4rem)] flex-col",children:[s.jsx(x.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"border-b border-mystic-500/20 bg-gradient-to-r from-card to-mystic-500/5 p-6",children:(0,s.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,s.jsxs)(x.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(x.E.div,{animate:{boxShadow:["0 0 20px rgba(139, 92, 246, 0.3)","0 0 40px rgba(139, 92, 246, 0.5)","0 0 20px rgba(139, 92, 246, 0.3)"]},transition:{duration:2,repeat:1/0},className:"flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-mystic-500/20 to-gold-500/20",children:s.jsx(n.Z,{className:"h-7 w-7 text-mystic-400"})}),s.jsx(x.E.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"absolute -bottom-1 -right-1 h-5 w-5 rounded-full bg-green-500 ring-2 ring-background"})]}),(0,s.jsxs)("div",{children:[s.jsx(x.E.h1,{initial:{opacity:0},animate:{opacity:1},className:"text-xl font-semibold",children:"天机阁大师"}),s.jsx(x.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-xs text-muted-foreground",children:"AI智能 \xb7 随时在线 \xb7 精通易经"})]})]}),s.jsx(x.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>a([j]),className:"border-mystic-500/30",children:[s.jsx(o,{className:"mr-2 h-4 w-4"}),e("master.newChat")]})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-3xl space-y-6",children:[0===t.length&&(0,s.jsxs)(x.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-20 text-center",children:[s.jsx(x.E.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0},className:"mx-auto mb-6 rounded-full bg-gradient-to-br from-mystic-500/20 to-gold-500/20 p-8",children:s.jsx(c.Z,{className:"h-16 w-16 text-mystic-400"})}),s.jsx(x.E.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-3 text-2xl font-bold gradient-text",children:e("master.title")}),s.jsx(x.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"max-w-md text-muted-foreground",children:e("master.subtitle")}),s.jsx(x.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-8 flex flex-wrap justify-center gap-3",children:["我的财运如何？","今年运势怎么样？","适合做什么工作？","如何提升桃花运？"].map((e,t)=>s.jsx(x.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(e),className:"rounded-full border border-mystic-500/30 bg-mystic-500/10 px-4 py-2 text-sm text-mystic-400 transition-colors hover:bg-mystic-500/20",children:e},t))})]}),s.jsx(h.M,{children:t.map((e,t)=>(0,s.jsxs)(x.E.div,{variants:w,initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},className:(0,u.cn)("flex space-x-4","user"===e.role&&"flex-row-reverse"),children:[s.jsx(x.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.1},className:(0,u.cn)("flex h-12 w-12 shrink-0 items-center justify-center rounded-full","assistant"===e.role?"bg-gradient-to-br from-mystic-500/30 to-purple-600/30":"bg-gradient-to-br from-gray-500/30 to-gray-600/30"),children:"assistant"===e.role?s.jsx(n.Z,{className:"h-6 w-6 text-mystic-400"}):s.jsx(d.Z,{className:"h-6 w-6 text-gray-400"})}),(0,s.jsxs)(x.E.div,{initial:{opacity:0,x:"user"===e.role?20:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:(0,u.cn)("max-w-[80%] rounded-2xl px-6 py-4","assistant"===e.role?"rounded-tl-sm bg-gradient-to-br from-card to-mystic-500/5 border border-mystic-500/20":"rounded-tr-sm bg-gradient-to-br from-mystic-600 to-purple-600 text-white"),children:[s.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:e.content.split("\n").map((e,t)=>s.jsx(x.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},children:e},t))}),s.jsx(x.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:(0,u.cn)("mt-3 text-xs","user"===e.role?"text-white/60":"text-muted-foreground"),children:e.timestamp.toLocaleTimeString()})]})]},e.id))}),f&&(0,s.jsxs)(x.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex space-x-4",children:[s.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-mystic-500/30 to-purple-600/30",children:s.jsx(n.Z,{className:"h-6 w-6 text-mystic-400"})}),s.jsx("div",{className:"flex items-center space-x-2 rounded-xl border border-mystic-500/20 bg-card/50 px-6 py-4",children:[0,1,2].map(e=>s.jsx(x.E.div,{animate:{y:[0,-8,0],opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0,delay:.2*e},className:"h-3 w-3 rounded-full bg-mystic-400"},e))})]}),s.jsx("div",{ref:v})]})}),s.jsx(x.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border-t border-mystic-500/20 bg-gradient-to-r from-card to-mystic-500/5 p-6",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-3xl",children:[(0,s.jsxs)("div",{className:"relative flex items-end space-x-4",children:[s.jsx(x.E.div,{whileFocus:{scale:1.01},className:"flex-1",children:s.jsx("textarea",{value:l,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},placeholder:e("master.placeholder"),rows:1,className:"w-full resize-none rounded-2xl border border-mystic-500/30 bg-background/80 px-6 py-4 pr-14 text-foreground placeholder:text-muted-foreground focus:border-mystic-500 focus:outline-none focus:ring-2 focus:ring-mystic-500/20 transition-all"})}),s.jsx(x.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsx(m.z,{onClick:b,disabled:!l.trim()||f,variant:"mystic",size:"icon",className:"h-12 w-12 rounded-full",children:s.jsx(p,{className:"h-5 w-5"})})})]}),s.jsx(x.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-3 text-center text-xs text-muted-foreground",children:"基于 MiniMax AI 模型 \xb7 仅供娱乐参考"})]})})]})}},9730:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(6557).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9635:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(6557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5191:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});var s=a(8570);let i=(0,s.createProxy)(String.raw`/Users/superalexbase/.openclaw/workspace/tianjige/app/[locale]/master/page.tsx`),{__esModule:r,$$typeof:n}=i;i.default;let l=(0,s.createProxy)(String.raw`/Users/superalexbase/.openclaw/workspace/tianjige/app/[locale]/master/page.tsx#default`)},8129:(e,t,a)=>{"use strict";a.d(t,{M:()=>f});var s=a(326),i=a(7577),r=a(339),n=a(7977),l=a(295),o=a(3965);class c extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){let a=(0,i.useId)(),r=(0,i.useRef)(null),n=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:l}=(0,i.useContext)(o._);return(0,i.useInsertionEffect)(()=>{let{width:e,height:s,top:i,left:o}=n.current;if(t||!r.current||!e||!s)return;r.current.dataset.motionPopId=a;let c=document.createElement("style");return l&&(c.nonce=l),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            top: ${i}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),(0,s.jsx)(c,{isPresent:t,childRef:r,sizeRef:n,children:i.cloneElement(e,{ref:r})})}let p=({children:e,initial:t,isPresent:a,onExitComplete:r,custom:o,presenceAffectsLayout:c,mode:p})=>{let u=(0,n.h)(m),x=(0,i.useId)(),h=(0,i.useCallback)(e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;r&&r()},[u,r]),y=(0,i.useMemo)(()=>({id:x,initial:t,isPresent:a,custom:o,onExitComplete:h,register:e=>(u.set(e,!1),()=>u.delete(e))}),c?[Math.random(),h]:[a,h]);return(0,i.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[a]),i.useEffect(()=>{a||u.size||!r||r()},[a]),"popLayout"===p&&(e=(0,s.jsx)(d,{isPresent:a,children:e})),(0,s.jsx)(l.O.Provider,{value:y,children:e})};function m(){return new Map}var u=a(6933);let x=e=>e.key||"";function h(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var y=a(2482);let f=({children:e,custom:t,initial:a=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:c="sync",propagate:d=!1})=>{let[m,f]=(0,u.oO)(d),g=(0,i.useMemo)(()=>h(e),[e]),v=d&&!m?[]:g.map(x),b=(0,i.useRef)(!0),j=(0,i.useRef)(g),w=(0,n.h)(()=>new Map),[N,E]=(0,i.useState)(g),[k,P]=(0,i.useState)(g);(0,y.L)(()=>{b.current=!1,j.current=g;for(let e=0;e<k.length;e++){let t=x(k[e]);v.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[k,v.length,v.join("-")]);let M=[];if(g!==N){let e=[...g];for(let t=0;t<k.length;t++){let a=k[t],s=x(a);v.includes(s)||(e.splice(t,0,a),M.push(a))}"wait"===c&&M.length&&(e=M),P(h(e)),E(g);return}let{forceRender:C}=(0,i.useContext)(r.p);return(0,s.jsx)(s.Fragment,{children:k.map(e=>{let i=x(e),r=(!d||!!m)&&(g===k||v.includes(i));return(0,s.jsx)(p,{isPresent:r,initial:(!b.current||!!a)&&void 0,custom:r?void 0:t,presenceAffectsLayout:o,mode:c,onExitComplete:r?void 0:()=>{if(!w.has(i))return;w.set(i,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==C||C(),P(j.current),d&&(null==f||f()),l&&l())},children:e},i)})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,49,434,957],()=>a(3977));module.exports=s})();